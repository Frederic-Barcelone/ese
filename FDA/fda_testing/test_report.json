{
  "timestamp": "2025-11-08T21:26:16.522254",
  "duration_seconds": 18.16317,
  "results": {
    "unit_tests": {
      "returncode": 0,
      "passed": true,
      "stdout": "\n================================================================================\nFDA SYNCER UNIT TESTS - FIXED VERSION\n================================================================================\nThis version handles import issues gracefully\nTests that depend on FDA syncer modules will be skipped if not found\n================================================================================\n\n\n================================================================================\nUNIT TEST SUMMARY\n================================================================================\nTests Run: 52\nSuccesses: 52\nFailures: 0\nErrors: 0\nSkipped: 0\n================================================================================\n\n",
      "stderr": "test_01_mode_is_valid (__main__.TestConfiguration)\nTest 1: MODE setting is valid ... ok\ntest_02_sync_areas_not_empty (__main__.TestConfiguration)\nTest 2: SYNC_AREAS is not empty ... ok\ntest_03_sync_areas_valid (__main__.TestConfiguration)\nTest 3: All SYNC_AREAS are valid ... ok\ntest_04_output_dir_is_string (__main__.TestConfiguration)\nTest 4: OUTPUT_DIR is a valid string ... ok\ntest_05_config_validation_function (__main__.TestConfiguration)\nTest 5: validate_config() runs without error ... ok\ntest_06_sync_config_structure (__main__.TestConfiguration)\nTest 6: get_sync_config() returns proper structure ... ok\ntest_07_api_key_type (__main__.TestConfiguration)\nTest 7: FDA_API_KEY is correct type ... ok\ntest_08_therapeutic_areas_structure (__main__.TestConfiguration)\nTest 8: THERAPEUTIC_AREAS has correct structure ... ok\ntest_09_aliases_structure (__main__.TestConfiguration)\nTest 9: ALIASES dictionary is properly structured ... ok\ntest_10_normalize_term_function (__main__.TestConfiguration)\nTest 10: normalize_term() works correctly ... ok\ntest_11_get_disease_count (__main__.TestTherapeuticAreas)\nTest 11: get_disease_count() returns positive integer ... ok\ntest_12_get_drug_class_count (__main__.TestTherapeuticAreas)\nTest 12: get_drug_class_count() returns positive integer ... ok\ntest_13_get_expanded_keywords (__main__.TestTherapeuticAreas)\nTest 13: get_expanded_keywords() includes aliases ... ok\ntest_14_aliases_are_strings (__main__.TestTherapeuticAreas)\nTest 14: All aliases map to string canonical terms ... ok\ntest_15_no_duplicate_canonical_terms (__main__.TestTherapeuticAreas)\nTest 15: No duplicate terms in canonical lists ... ok\ntest_16_expanded_keywords_no_duplicates (__main__.TestTherapeuticAreas)\nTest 16: Expanded keywords don't have duplicates ... ok\ntest_17_all_areas_have_content (__main__.TestTherapeuticAreas)\nTest 17: All therapeutic areas have diseases and drug classes ... ok\ntest_18_ensure_dir_creates_directory (__main__.TestHelperFunctions)\nTest 18: ensure_dir() creates directories ... ok\ntest_19_ensure_dir_handles_existing (__main__.TestHelperFunctions)\nTest 19: ensure_dir() handles existing directories ... ok\ntest_20_extract_drug_names_from_labels (__main__.TestHelperFunctions)\nTest 20: extract_drug_names_from_labels() extracts names correctly ... ok\ntest_21_extract_drug_names_handles_missing_openfda (__main__.TestHelperFunctions)\nTest 21: extract_drug_names_from_labels() handles missing openfda ... ok\ntest_22_extract_drug_names_handles_empty_list (__main__.TestHelperFunctions)\nTest 22: extract_drug_names_from_labels() handles empty input ... ok\ntest_23_extract_drug_names_deduplicates (__main__.TestHelperFunctions)\nTest 23: extract_drug_names_from_labels() removes duplicates ... ok\ntest_24_check_existing_file (__main__.TestHelperFunctions)\nTest 24: check_existing_file() works correctly ... ok\ntest_25_http_client_initialization (__main__.TestHTTPClient)\nTest 25: SimpleHTTPClient initializes correctly ... ok\ntest_26_http_client_custom_retries (__main__.TestHTTPClient)\nTest 26: HTTP client concept test ... ok\ntest_27_http_client_successful_request (__main__.TestHTTPClient)\nTest 27: HTTP client request handling ... ok\ntest_28_http_client_handles_404 (__main__.TestHTTPClient)\nTest 28: HTTP client 404 handling ... ok\ntest_29_http_client_uses_timeout (__main__.TestHTTPClient)\nTest 29: HTTP client timeout concept ... ok\ntest_30_http_client_disables_ssl_verify (__main__.TestHTTPClient)\nTest 30: HTTP client SSL concept ... ok\ntest_31_http_client_rate_limits (__main__.TestHTTPClient)\nTest 31: HTTP client rate limiting concept ... ok\ntest_32_http_client_download_file (__main__.TestHTTPClient)\nTest 32: HTTP client file download concept ... ok\ntest_33_labels_downloader_initialization (__main__.TestLabelsDownloader)\nTest 33: LabelsDownloader concept ... ok\ntest_34_labels_downloader_batch_keywords (__main__.TestLabelsDownloader)\nTest 34: Keyword batching concept ... ok\ntest_35_labels_downloader_build_search_query (__main__.TestLabelsDownloader)\nTest 35: Query building concept ... ok\ntest_36_labels_check_if_disabled (__main__.TestLabelsDownloader)\nTest 36: Config respect concept ... ok\ntest_37_labels_load_progress_empty (__main__.TestLabelsDownloader)\nTest 37: Progress loading concept ... ok\ntest_38_labels_load_progress_existing (__main__.TestLabelsDownloader)\nTest 38: Existing progress concept ... ok\ntest_39_labels_save_progress (__main__.TestLabelsDownloader)\nTest 39: Progress saving concept ... ok\ntest_40_labels_finalize_removes_progress (__main__.TestLabelsDownloader)\nTest 40: Finalization concept ... ok\ntest_41_approval_packages_initialization (__main__.TestApprovalPackagesDownloader)\nTest 41: ApprovalPackagesDownloader concept ... ok\ntest_42_approval_packages_categorize (__main__.TestApprovalPackagesDownloader)\nTest 42: Document categorization concept ... ok\ntest_43_approval_packages_sanitize_filename (__main__.TestApprovalPackagesDownloader)\nTest 43: Filename sanitization concept ... ok\ntest_44_approval_packages_sanitize_long_filename (__main__.TestApprovalPackagesDownloader)\nTest 44: Long filename handling concept ... ok\ntest_45_approval_packages_sanitize_adds_pdf_extension (__main__.TestApprovalPackagesDownloader)\nTest 45: PDF extension concept ... ok\ntest_46_approval_packages_find_app_number (__main__.TestApprovalPackagesDownloader)\nTest 46: App number extraction concept ... ok\ntest_47_approval_packages_respects_config (__main__.TestApprovalPackagesDownloader)\nTest 47: Config respect concept ... ok\ntest_48_adverse_events_initialization (__main__.TestAdverseEventsDownloader)\nTest 48: AdverseEventsDownloader concept ... ok\ntest_49_adverse_events_respects_config (__main__.TestAdverseEventsDownloader)\nTest 49: Config respect concept ... ok\ntest_50_adverse_events_load_progress (__main__.TestAdverseEventsDownloader)\nTest 50: Progress loading concept ... ok\ntest_51_enforcement_initialization (__main__.TestEnforcementDownloader)\nTest 51: EnforcementDownloader concept ... ok\ntest_52_enforcement_respects_config (__main__.TestEnforcementDownloader)\nTest 52: Config respect concept ... ok\n\n----------------------------------------------------------------------\nRan 52 tests in 0.200s\n\nOK\n"
    },
    "fda_validation": {
      "returncode": 1,
      "passed": false,
      "stdout": "\n======================================================================\n\u001b[94mFDA DATA ORGANIZATION VALIDATION TEST\u001b[0m\n======================================================================\nPurpose: Detect if FDA has changed their data organization\nDate: 2025-11-08 21:26:16\n======================================================================\n\n\n\u001b[94m[TEST 1] API Endpoint Accessibility\u001b[0m\n\u001b[92m=== PASS\u001b[0m - Drug Labels API accessible\n     Status: 200\n\u001b[92m=== PASS\u001b[0m - Drug Events API accessible\n     Status: 200\n\u001b[92m=== PASS\u001b[0m - Drug Enforcement API accessible\n     Status: 200\n\n\u001b[94m[TEST 2] Drug Label API Structure\u001b[0m\n\u001b[92m=== PASS\u001b[0m - Label API has required top-level keys (meta, results)\n     Found keys: ['meta', 'results']\n\u001b[92m=== PASS\u001b[0m - Label API meta structure intact\n     Meta keys: ['disclaimer', 'terms', 'license', 'last_updated', 'results']\n\u001b[92m=== PASS\u001b[0m - Label API results have critical identifier fields\n     Found: ['id', 'set_id', 'version']\n\u001b[92m=== PASS\u001b[0m - Label API results have openfda section\n     Present: True\n\u001b[92m=== PASS\u001b[0m - Label API openfda has expected fields\n     Found 3/3: ['brand_name', 'generic_name', 'application_number']\n\u001b[92m=== PASS\u001b[0m - Label API has indication/description fields\n     Found: ['indications_and_usage', 'description']\n\n\u001b[94m[TEST 3] Adverse Events API Structure\u001b[0m\n\u001b[91m=== FAIL\u001b[0m - Adverse Events API has expected structure\n     Keys present: ['error']\n\n\u001b[94m[TEST 4] Enforcement API Structure\u001b[0m\n\u001b[92m=== PASS\u001b[0m - Enforcement API has expected structure\n     Keys: ['meta', 'results']\n\u001b[92m=== PASS\u001b[0m - Enforcement results have critical fields\n     Found 3/3: ['report_date', 'product_description', 'reason_for_recall']\n\n\u001b[94m[TEST 5] Approval Packages Website\u001b[0m\n\u001b[92m=== PASS\u001b[0m - FDA AccessData website accessible\n     Status: 200\n\u001b[92m=== PASS\u001b[0m - Approval packages URL structure valid (2024)\n     Status: 200\n\n\u001b[94m[TEST 6] API Search Capabilities\u001b[0m\n\u001b[92m=== PASS\u001b[0m - API supports OR queries\n     Results: 4\n\u001b[92m=== PASS\u001b[0m - API supports field-specific search\n     Results: 5\n\u001b[91m=== FAIL\u001b[0m - API supports date range queries\n     Results: 0\n\n\u001b[94m[TEST 7] API Pagination\u001b[0m\n\u001b[92m=== PASS\u001b[0m - API pagination (skip/limit) works\n     Results: 10, Has total: True\n\n\u001b[94m[TEST 8] Data Type Validation\u001b[0m\n\u001b[92m=== PASS\u001b[0m - API returns arrays for multi-value fields\n     Checked 3 fields\n\u001b[92m=== PASS\u001b[0m - API returns strings for text fields\n     Checked 2 fields\n\n======================================================================\n\u001b[94mTEST SUMMARY\u001b[0m\n======================================================================\nTotal Tests: 20\n\u001b[92mPassed: 18\u001b[0m\n\u001b[91mFailed: 2\u001b[0m\n\n\u001b[93mFAILING TESTS:\u001b[0m\n  === Adverse Events API has expected structure\n  === API supports date range queries\n\n\u001b[91m======  WARNING: FDA data organization may have changed!\u001b[0m\nThese failures indicate the scripts may need updates.\n======================================================================\n\nDetailed results saved to: /Users/kxbb828/Library/CloudStorage/OneDrive-AZCollaboration/Desktop/WIP-ESE/17_Corpus/FDA/fda_testing/fda_validation_results.json\n",
      "stderr": "/Users/kxbb828/Library/CloudStorage/OneDrive-AZCollaboration/Desktop/WIP-ESE/17_Corpus/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py:1064: InsecureRequestWarning: Unverified HTTPS request is being made to host 'www.accessdata.fda.gov'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/1.26.x/advanced-usage.html#ssl-warnings\n  warnings.warn(\n/Users/kxbb828/Library/CloudStorage/OneDrive-AZCollaboration/Desktop/WIP-ESE/17_Corpus/.venv/lib/python3.9/site-packages/urllib3/connectionpool.py:1064: InsecureRequestWarning: Unverified HTTPS request is being made to host 'www.accessdata.fda.gov'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/1.26.x/advanced-usage.html#ssl-warnings\n  warnings.warn(\n"
    }
  },
  "summary": {
    "total_suites": 2,
    "passed": 1,
    "failed": 1,
    "skipped": 0
  }
}